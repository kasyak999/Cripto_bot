# Скрипт для биржи
Бот который будет осуществлять ребаланс выбранных монет 

1. При первом запуске скрипта производится покупка выбранной монеты.
В базе данных фиксируются:

    - цена покупки (начальная стоимость),
    - объём монеты,
    - потраченная сумма в USDT.

2. После покупки скрипт продолжает отслеживать цену монеты.

    - Каждое снижение цены на 5% от последней покупки приводит к докупке монеты на 5% от текущего остатка в USDT, выделенного на эту монету.
    - Эти точки фиксируются в виде красных точек на графике.

3. Если цена монеты вырастает на 5% выше начальной цены, скрипт:

    - продаёт весь объём монеты,
    - фиксирует прибыль или убыток,
    - прекращает дальнейшую работу с этой монетой.

4. После продажи монета остаётся в базе данных:

    - сохраняется информация о всех сделках,
    - фиксируется общая сумма потраченных средств (USDT),
    - можно оценить, была ли сделка прибыльной.

![График](info.png)

Расчеты [в exel](/calculations.xlsx)

### Софт для работы
1. docker
2. DBeaver Community

### Установка и управление
- Подготовка

    1. Создать файл `.env`
    2. Рядом сохранить файл [docker-compose.yml](/docker-compose.yml)

- Запуск docker compose
    ```
    docker compose up --build 
    ```

- Настройка бота 
    ```
    docker compose exec bot python main.py -h
    ```

- Запуск в фоновом режиме
    ```
    docker compose exec -d bot python main.py -s
    ```

- Остановить бота (если запущен в фоновом режиме)
    ```
    docker compose exec bot kill <номер>
    ```

- Посмотреть <номер> для остановки
    ```
    docker compose exec bot ps aux
    ```

- Остановка docker compose
```
docker compose down
```

### Файл .env
```
# Демо-режим True / Ральный режим False
DEMO=False

API_KEY=публичный_ключ
API_SECRET=секретный_ключ

COMPOSE_PROJECT_NAME=crypto

# ----- Не обязательные переменые -----
# DEMO_API_KEY=публичный_ключ_демо_режима (не обязательно)
# DEMO_API_SECRET=секретный_ключ_демо_режима (не обязательно)

# Процент снижения для поуцпки -5% (по умолчанию 0.95)
# PROCENT_BUY=0.95
# Процент роста для продажи +5% (по умолчанию 1.05)
# PROCENT_SELL=1.05
# Количество USDT на которую будет покупаться монета
# BUY_USDT=5
# Комиссия на покупку 0.1% (по умолчанию 0.999)
# COMMISSION=0.999
```