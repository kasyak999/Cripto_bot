# Скрипт для биржи
- При первом запуске необходимо добавить монеты с которыми будем работать. На балансе должно быть больше 0.

- Данные зафиксируются в базу данных.

    - курс покупки
    - объём монеты
    - потраченная сумма в USDT

- Программа отслеживает цену монеты.

    - Каждое снижение цены на 5% от последней покупки приводит к докупке монеты на 5 USDT от текущего.
    - Эти покупки фиксируются в базе.

- Если курс монеты вырастает на 5% выше начальной цены:

    - продаёт весь объём монеты,
    - фиксирует прибыль или убыток,
    - прекращает дальнейшую работу с этой монетой.

- После продажи информация о монете остаётся в базе данных. Можно оценить, была ли сделка прибыльной.

![График](info.png)
**Красные точки** - покупка монеты. **Зеленые точки** - продажа.

Расчеты [в exel](/calculations.xlsx)

## Необходимые условия
Наличие **Docker** на вашей машине
Для установки и настройки смотрите официальную документацию: https://docs.docker.com


## Установка
### Подготовка

1. Создать файл `.env`
2. Рядом сохранить файл [docker-compose.yml](/docker-compose.yml)
3. Выполнить команду для установки образа
    ```
    docker compose up --build -d
    ```
4. Дополнительные настройки можно сделать в `.env`
5. Готово

### Управление и настройка

- Настройка бота 
    ```
    docker compose exec bot python main.py -h
    ```
    или
    ```
    docker exec crypto-bot-1 python main.py -h
    ```

- Посмотреть логи

    ```
    docker compose exec bot cat log.log
    ```
    или
    ```
    docker exec -it crypto-bot-1 cat log.log
    ```

- Остановка и запуск контейнера
    ```
    docker stop crypto-bot-1
    docker start crypto-bot-1
    ```

- Удаление образа
    ```
    docker compose down
    ```

- Проверить работу бота
    ```
    docker compose exec bot ps aux
    ```
    или
    ```
    docker exec -it crypto-bot-1 ps aux
    ```

## Файл .env
```
# Демо-режим true / Ральный режим false
DEMO=false

API_KEY=публичный_ключ
API_SECRET=секретный_ключ

COMPOSE_PROJECT_NAME=crypto

# ----- Не обязательные переменые -----
# DEMO_API_KEY=публичный_ключ_демо_режима (не обязательно)
# DEMO_API_SECRET=секретный_ключ_демо_режима (не обязательно)

# Через какое время происходит проверка курса, 1 минута стоит по умолчанию
# TIME_SLEEP=1
# Процент снижения для поуцпки -5% (по умолчанию 0.95)
# PROCENT_BUY=0.95
# Процент роста для продажи +5% (по умолчанию 1.05)
# PROCENT_SELL=1.05
# Количество USDT на которую будет покупаться монета
# BUY_USDT=5
# Комиссия на покупку 0.1% (по умолчанию 0.999)
# COMMISSION=0.999
```